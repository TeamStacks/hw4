<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="description" content="bullion management site, rare coins, gold, silver, platinum">
    <meta name="author" content="CSE134B Dream Team">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="./style/style.css">
    <meta name=viewport content="width=device-width, initial-scale=.8, minimum-scale = .8, user-scalable=yes">
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <script src="./js/jquery-1.11.2.min.js"></script>
    <script src="./js/velocity.min.js"></script>
    <script src="./js/main.js"></script>
    <script src="./js/account.js"></script>
    <script type="text/javascript" src="./js/parse-1.4.2.min.js"></script>
    <script type="text/javascript" src="./js/parsefb.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <title>Gold Item - CoinFlip</title>
</head>

<body>
    <script type="text/javascript">
    loadTopNav();
    </script>
    <script type="text/javascript">
    loadSideNav(1);
    </script>
    <section class="main-section">
        <section class="coin_wrapper">
            <div class="mobile-nav">
                <a href="wire3.html">
                    <svg class="icon icon-keyboard-arrow-left">
                        <symbol id="icon-keyboard-arrow-left" viewBox="0 0 1024 1024">
                            <title>keyboard-arrow-left</title>
                            <path class="path1" d="M657.707 696.96l-195.627-195.627 195.627-195.627-60.373-60.373-256 256 256 256z"></path>
                        </symbol>
                        <use xlink:href="#icon-keyboard-arrow-left"></use>
                    </svg>
                </a>
                ITEM DETAIL
            </div>
            <div class="coin_main">
                <a href="wire3.html">
                    <div class="breadcrumb">
                        <svg class="icon icon-play-arrow-rev">
                            <symbol id="icon-play-arrow" viewBox="0 0 1024 1024">
                                <title>play-arrow</title>
                                <path class="path1" d="M682.667 213.333v597.333l-469.333-298.667z"></path>
                            </symbol>
                            <use xlink:href="#icon-play-arrow"></use>
                        </svg>
                        Item Detail
                    </div>
                </a>
                <section class="coin_image">
                    <div class="img_box">
                        <div class="img_circle"></div>
                    </div>
                </section>
                <section class="coin_detail">
                    <table>
                        <tr>
                            <td>Metal</td>
                            <td id="metal">Loading</td>
                        </tr>
                        <tr>
                            <td>Type</td>
                            <td id="type">Loading</td>
                        </tr>
                        <tr>
                            <td>Purchase Date</td>
                            <td id="purchase_date">Loading</td>
                        </tr>
                        <tr>
                            <td>Qty.</td>
                            <td id="quantity">Loading</td>
                        </tr>
                        <tr>
                            <td>Premium</td>
                            <td id="premium">Loading</td>
                        </tr>
                        <tr>
                            <td>Unit Price</td>
                            <td id="unit_price">Loading</td>
                        </tr>
                        <tr>
                            <td>Gold %</td>
                            <td id="metal_percentage">Loading</td>
                        </tr>
                        <tr>
                            <td>Weight/unit (g)</td>
                            <td id="weight_per_unit">Loading</td>
                        </tr>
                        <tr>
                            <td>Gold g/u</td>
                            <td id="grams_per_unit">Loading</td>
                        </tr>
                        <tr>
                            <td>Gold ozt/u</td>
                            <td id="ozt_per_unit">Loading</td>
                        </tr>
                        <tr>
                            <td>Total au (ozt)</td>
                            <td>0.0400</td>
                        </tr>
                        <tr>
                            <td><strong>TOTAL</strong></td>
                            <td><strong id="value">Loading</strong></td>
                        </tr>
                    </table>
                </section>
            </div>
        </section>
    </section>

    <div class="modal fade" id="profile" tabindex="-1" role="dialog" aria-labelledby="ProfileModal" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close2 btn btn-default" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="ProfileModal">MY PROFILE</h4>
          </div>
          <form>
            <div class="modal-body">
                <div class="form-group">
                    <label>USERNAME</label><br>
                    <p id="user" class="no-dec"></p>
                </div>
                <div class="form-group">
                    <label for="pass">NEW PASSWORD</label>
                    <input type="password" class="form-control" id="pass" placeholder="Password">
                </div>
                <button type="button" class="btn btn-primary" onclick="update()">Update Profile</button> <button type="button" id ="fblink" class="btn btn-primary" onclick="linkfb()">Link Facebook</button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="logOut()">Log Out</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <script type="text/javascript">
        verify();
        loadFooter();

        var inventoryId = "4DxjNX8gsg";

        loadInventory(inventoryId);

        function loadInventory(inventoryId) {
            var Inventory = Parse.Object.extend("Inventory");
            var query = new Parse.Query(Inventory);
            query.get(inventoryId, {
                success: function(inventory) {
                    var purchaseDate = inventory.get("purchaseDate");
                    var quantity = inventory.get("quantity");
                    var type = inventory.get("type");
                    var value = inventory.get("value");

                    $("#purchase_date").text(purchaseDate.toDateString());
                    $("#quantity").text(quantity);
                    $("#value").text(value);

                    loadCoin(type.id);
                },
                error: function(inventory, error) {
                    alert("Unable to retrieve inventory! " + error.message);
                }
            });
        }

        function loadCoin(coinId) {
            var Coin = Parse.Object.extend("Coin");
            var query = new Parse.Query(Coin);
            query.get(coinId, {
                success: function(coin) {
                    var type = coin.get("Type");
                    var gramsPerUnit = coin.get("gramsPerUnit");
                    var metal = coin.get("metal");
                    var metalPercentage = coin.get("metalPercentage");
                    var oztPerUnit = coin.get("oztPerUnit");
                    var premium = coin.get("premium");
                    var unitPrice = coin.get("unitPrice");
                    var weightPerUnit = coin.get("weightPerUnit");

                    $("#type").text(type);
                    $("#grams_per_unit").text(gramsPerUnit);
                    $("#metal").text(metal);
                    $("#metal_percentage").text(metalPercentage);
                    $("#ozt_per_unit").text(oztPerUnit);
                    $("#premium").text(premium);
                    $("#unit_price").text(unitPrice);
                    $("#weight_per_unit").text(weightPerUnit);
                },
                error: function(coin, error) {
                    alert("Unable to retrieve coin! " + error.message);
                }
            });
        }
    </script>
</body>

</html>
